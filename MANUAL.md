# 调试大师软件使用指南

## 常量的表达方式

整数可以使用十进制或者十六进制表达。使用十六进制时，必须用“0x”作为数字的开头。

地址常量是一个整数，必须小于被调试平台该模式下的地址长度。

## 类型

基本类型包括u8、u16、u32、u64、u128；i8、i16、i32、i64、i128；f32和f64。

数组指的是`[基本类型; 长度]`，长度为usize类型整数。

## X指令

X指令可以打印特定地址的内存值或指令。

### 使用方法

x[特权级][/数据类型|/z] <数据地址>

其中：

- 特权级可以为：m、s、u或者省略。如果省略，指的是介入调试器前，待测程序运行的特权级。
- 数据类型可以为基本类型、数组或者指令。如果在数据类型的位置填写“z”，说明希望打印得到对应地址的指令。
- 数据地址为地址常量。

### 指令输出

输出在本特权级下解释此地址，得到的数据。数据类型为参数，只会以读的形式访问内存；为/z时，会模拟使用写的方式访问内存。

如果涉及页式虚拟地址访问，页表翻译可能会出现缺页异常，将会打印完整的页表翻译流程，并指出发生异常的位置。

如果出现访存异常，将会指出触发异常的地址，和它对应的物理地址。

### 特权级

RISC-V指令集中，访问地址需要指定访问来源的特权级。有M、S和U三个等级。

当以M级访问时，将从物理地址空间读取数据，不经过页表机制。

```text
[DebugSBI] (debug) xm 0x1000
[DebugSBI] PhysMem[0x1000], Machine = 0x00000297
```

当以S和U级访问时，地址将经过页表翻译。

```text
[DebugSBI] (debug) xs 0x1000
[DebugSBI] VirtMem[0x1000], Supervisor = 0x3f409876
```

注意，RISC-V指令集可能存在物理空间大于可索引空间的情况。如，在32位RISC-V的Sv32页表模式中，
物理地址长达34位，超过了32位。使用X指令访问这些地址时，将会通过构造页表、更换页表基址的方式访问。
